#!/usr/bin/env bash

set -e

if ! [ -x "$(command -v ansible)" ]; then
	echo "Ansible not found, run bootstrap script first..."
	exit 1
fi

ROLES_TO_RUN=$1

if [[ -z "$ROLES_TO_RUN" ]]; then
	EXTRA_VARS=""
else
	EXTRA_VARS="--extra-vars "roles_to_run=$ROLES_TO_RUN""
fi

ansible-playbook $EXTRA_VARS --diff "$HOME/dev/dotfiles/main.yml"
